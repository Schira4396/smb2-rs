# smb2-rs

è¿™æ˜¯ä¸€ä¸ªç”¨äºSmb2.1 åè®®è®¤è¯çš„åº“ï¼Œå®ƒä½¿ç”¨çº¯rustå®ç°ï¼Œèµ·å› æ˜¯æˆ‘ç¿»éäº†githubï¼Œå¹¶æ²¡æœ‰å‘ç°ç›¸å…³ä¸”è¾ƒä¸ºæˆç†Ÿçš„åº“ï¼Œå”¯ä¸€æœ‰ç”¨çš„åªèƒ½å·¥ä½œäº3.Xï¼Œä½†è¿™æ ·çš„è¯å®ƒçš„å…¼å®¹æ€§å°±ä¸é«˜äº†ï¼Œsmb3ä»server 2016/windows 10å¼•å…¥ï¼Œé‚£ä¹ˆåœ¨é‚£ä¹‹å‰çš„windowså°±æ²¡æ³•æäº†ï¼Œä½†æ˜¯æˆªæ­¢ç›®å‰ï¼Œè‡³å°‘smb 2.1æ”¯æŒä»server 2008åˆ°2016ã€windows 7åˆ°windows 10ï¼Œæ‰€ä»¥æœ‰äº†è¿™ä¸ªåº“ã€‚


## 0x01 è¯´æ˜

ğŸ˜Šæ­¤åº“æ˜¯çº¯rustæ‰‹æ“çš„ï¼ŒLinux/Windowséƒ½å…¼å®¹ä¸”ä¸ä¾èµ–lib-smbclientçš„Cåº“ï¼Œç›®å‰åœ¨Windows7ã€Windows server 2008ã€Windows server 2012ã€Windows server 2016ä»¥åŠWindows 10ä¸Šæµ‹è¯•é€šè¿‡ï¼Œsambaæ²¡æµ‹ã€‚

ğŸ˜Šå¦‚æœæœ‰æƒ³æ³•å¯ä»¥åŠ å…¥æˆ‘ä¸€èµ·å®Œå–„ã€‚

## 0x02 ä½¿ç”¨æ–¹æ³•



```rust
use smb2_rs::{SmbOptions};
use anyhow::{Result};



#[tokio::main]
async fn main() -> Result<()> {

    let op = SmbOptions{
        Host:        "192.168.132.173",
        Port:        "445",
        User:        "administrator",
        Domain:      "corp",
        Workstation: "123",
        Password:    "123456",
    };
    let mut result = smb_rs::Conn(op).await?;//result
    let b = result.IsAuthenticated();//boolï¼Œæ–¹ä¾¿è¿›è¡Œåˆ¤æ–­
    println!("{:?}, status_code: {:?}",b, result.StatusCode);//...
    Ok(())
}
```

## 0x03 æ³¨æ„

ğŸ¤–å®ƒåªèƒ½å®ç°è®¤è¯ï¼Œæ—¨åœ¨æ–¹ä¾¿ç½‘ç»œå®‰å…¨è¡Œä¸šçš„ä»ä¸šäººå‘˜/å­¦ç”Ÿè¿›è¡Œå­¦ä¹ å’Œç ”ç©¶ï¼Œæ²¡æœ‰å…¶ä»–ç›®çš„ï¼Œå¦‚æœä½ æƒ³æ‹¿å®ƒç”¨æ¥ç¼–å†™è‡ªå·±çš„å¼€æº/é—­æºå·¥å…·ï¼Œé‚£ä¹ˆè¯·ç‚¹ä¸ªStarå§ã€‚


## 0x04 ä¸‹ä¸€æ­¥è®¡åˆ’

|     åºå·     |            è¯´æ˜            | è¿›åº¦ |
| :----------: | :------------------------: | :--: |
|    smb v1    |    Windows server 2003     |  Ã—   |
|    smb v3    | Windows 10 or server 2016+ |  Ã—   |
| Tree Connect |            ...             |  Ã—   |
|     PTH      |          you know          |  Ã—   |

## 0x05 å…è´£å£°æ˜

ğŸ˜¡åŸºäºæ­¤åº“å¼€å‘çš„ä»»ä½•æ¶æ„å·¥å…·æˆ–æ£€æµ‹å‡ºçš„æ ·æœ¬ï¼Œå‡å’Œæœ¬äººæ²¡æœ‰ä»»ä½•å…³ç³»ã€‚
